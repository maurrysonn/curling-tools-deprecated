{% extends 'core/model_detail.html' %}
{% load i18n static %}
{% load url from future %}

{% block title %}{% trans "Dashboard :" %}&nbsp;{{ ct_tournament.name }}{% endblock title %}

{% block object_container %}
<div class="row-fluid">
  <div class="span5">
	<table class="table table-bordered table-vertical-align">
	  <tr><th>{% trans "Date" %}</th><td>{{ ct_tournament.start_date }} - {{ ct_tournament.end_date }}</td></tr>
	  <tr><th>{% trans "Rink" %}</th><td>{% if ct_tournament.rink %}{{ ct_tournament.rink }}{% endif %}</td></tr>
	</table>
  </div>
</div>
<div class="row-fluid">
  <div class="span5">
	{# Display GROUP #}
	<table class="table table-bordered table-vertical-align">
	  <thead>
		<tr><th colspan="3" class="text-center">{% trans "Groups" %}</th></tr>
	  </thead>
	  <tbody>
		{% for group in ct_tournament.groups_list %}
		<tr>
		  <td><strong>{% trans "Level" %}&nbsp;{{ group.level }}</strong></td>
		  <td><a href="{{ group.get_absolute_url }}">{% trans "Group" %}&nbsp;{{ group.name }}</a></td>
		  <td><em>{% if group.level == 1 %}{{ group.nb_current_teams }}&nbsp;/&nbsp;{% endif %}{{ group.nb_teams }}&nbsp;{% trans "teams" %}</em></td>
		</tr>
		{% endfor %}
		{% comment %}
		<tr><td colspan="3" class="text-center">
			<a href="{% url 'tournament_schenkel:group-add' ct_tournament.pk %}" class="btn btn-primary">
			  <i class="icon-plus icon-white"></i>&nbsp;{% trans "Add group" %}</a>
		</td></tr>
		{% endcomment %}
	  </tbody>
	</table>
  </div>
  <div class="span7">
	{# Display MAIN ROUNDS #}
	{% for main_round in ct_tournament.main_rounds_list %}
	<table class="table table-striped table-bordered table-hover table-vertical-align">
	  <thead>
		<tr>
		  <th colspan="4" class="text-center">
			<a href="{{ main_round.get_absolute_url }}"> {% trans "Main Round" %}&nbsp;{{ main_round.name }}</a>
		  </th>
		</tr>
		{#<tr><th>{% trans "Group" %}</th><th>{% trans "Date" %}</th><th>{% trans "Time" %}</th></tr>#}
	  </thead>
	  <tbody>
		{# Display ROUNDS #}
		{% for round in main_round.rounds_list %}
		<tr>
		  <td>{% trans "Group" %}&nbsp;{{ round.group.name }}</td>
		  <td class="text-center">{{ round.date|date:"d/m/y" }} - {{ round.time_start|time:"H:i" }}</td>
		  {# STATUS #}
		  <td class="text-center">
			{% if round.current %}
			<span class="label label-important">In progress</span>
			{% else %}
			{% if round.finished %}
			<span class="label label-succes">Finished</span>
			{% else %}
			<span class="label">Not started</span>
			{% endif %}{% endif %}
		  </td>
		  {# ACTIONS #}
		  <td class="text-center">
			<a class="btn btn-small btn-primary" href="{{ round.get_absolute_url }}"><i class="icon-arrow-right icon-white"></i></a>
		  </td>
		</tr>
		{% empty %}
		<tr class="error"><td colspan="4" class="text-center"><em>{% trans "No rounds available." %}</em></td></tr>
		{% endfor %}
		{% comment %}
		<tr>
		  <td colspan="4" class="text-center">
			<a class="btn btn-primary" href="{% url 'tournament_schenkel:round-add' ct_tournament.pk main_round.pk %}">
			  <i class="icon-plus icon-white"></i>&nbsp;{% trans "Add round" %}</a>
		  </td>
		</tr>
		{% endcomment %}
	  </tbody>
	</table>
	{% endfor %}
	{% comment %}
	<a class="btn btn-block btn-primary" href="{% url 'tournament_schenkel:main-round-add' ct_tournament.pk %}">
	  <i class="icon-plus icon-white"></i>&nbsp;{% trans "Add main round" %}</a>
	{% endcomment %}
  </div>
</div>
{% endblock object_container %}

{% block object_actions %}
<h4 class="text-center">{% trans "Settings" %}</h4>
<a class="btn btn-block btn-large" href="{% url 'tournament_schenkel:tournament-schenkelgroup-list' ct_tournament.pk %}">
  <i class="icon-edit"></i>&nbsp;{% trans "Edit groups" %}</a>
<a class="btn btn-block btn-large" href="{% url 'tournament_schenkel:tournament-schenkeltournamentround-list' ct_tournament.pk %}">
  <i class="icon-edit"></i>&nbsp;{% trans "Edit main rounds" %}</a>
{% endblock object_actions %}
